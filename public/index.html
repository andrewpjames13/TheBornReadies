<!DOCTYPE html>
<!--[if lt IE 9]> <html class="no-js weak" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Rip it with gulp!</title>
		<meta name="author" content="Legwork Studio (http://www.legworkstudio.com)">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<!-- build:css styles/style.css -->
		<link rel="stylesheet" href="/css/app.css">
		<link rel="stylesheet" href="/vendor/fullPage.js-master/jquery.fullPage.css">
		<!-- endbuild -->

		<!-- build:js1 scripts/vendor_top.min.js -->
		<script src="/vendor/modernizr/modernizr.js"></script>
		<!-- endbuild -->
	</head>
	<body>
		<div class="top-border"><div class="paper-bg"></div></div>
		<div class="right-border"><div class="paper-bg"></div></div>
		<div class="bottom-border"><div class="paper-bg"></div></div>
		<div class="left-border"><div class="paper-bg"></div></div>
		<div id="nav" class="nav-container" onclick="toggleNav()">
			<div class="centered-content">
				<ul>
					<li><a href="#">HOME</a></li>
					<li><a href="#">ABOUT</a></li>
					<li><a href="#">MERCH</a></li>
					<li><a href="#">CONTACT</a></li>
				</ul>
			</div>
		</div>

		<nav id="site-nav">
			<button onclick="toggleNav()">
				<svg id="menu-icon" viewBox="0 0 122.7 134.3">
					<path fill="#A29060" d="M1.7,34.3h45.4c0,0-0.1,0.1-0.1,0.2c-3.6,6.1-7.2,11.8-10.7,15.8H1.7V34.3z"></path>
					<path fill="#A29060" d="M120.7,34.3v16H97.1c0,0,0,0.2,0,0.1c0.7-3,0-6.1-1.9-8.5c-2.1-2.7-5.5-4.2-9-4.2c-0.9,0-1.8,0.1-2.7,0.3
						c-0.8,0.2-2.1,0.5-3.7,0.8c0.3-1.3,1-4.5,1-4.5H120.7z"></path>
					<path fill="#A29060" d="M37.4,74.4c1.5,0.1,3.8,0.4,6.3,0.5c-2,3-4.4,6.4-7,9.4h-35v-16H28c0,0,0.1,0,0.1,0
						C29.7,71.9,33.2,74.1,37.4,74.4z"></path>
					<path fill="#A29060" d="M120.7,68.3v16H91.7c0-2-0.6-4-1.7-5.7c-0.9-1.4-2.3-2.7-3.7-3.5c1.1-2.1,2.3-4.4,3.3-6.8c0,0,0.4,0,0.5,0
						H120.7z"></path>
					<path fill="#A29060" d="M37.2,108.5C37.3,108.5,37.1,108.4,37.2,108.5c-2.1,2.8-4.4,5.9-6.9,8.9H1.7v-16h26.1
						C29.2,105.3,33.1,107.9,37.2,108.5z"></path>
					<path fill="#A29060" d="M120.7,101.3v16H68.4c4.9-5,9.7-10,14-16H120.7z"></path>
					<g>
						<path fill="#A29060" d="M87.1,48.6c-0.2,0.7-0.4,1.4-0.7,2.1c0,0,0,0.1,0,0.1c-1.9,5.4-4.8,11.7-7.7,17.2c0,0.1-0.1,0.1-0.1,0.2
							c-4.2,8.1-8.1,14.6-8.1,14.6c2.7,0.3,4.9,0.3,6.6,0.3c1.3,0,2.3,0,3.1-0.1c0,0,0.1,0,0.1,0c0.6,0,1.1,0.5,1.1,1
							c0,0.1,0,0.4-0.1,0.6c-3.3,6.2-7.4,11.9-11.7,17.2c-5.2,5.9-10.8,11.3-16.2,15.4c-9.4,7.7-18.1,13-23,15.6
							c-0.1,0.1-0.2,0.1-0.3,0.1c-0.4,0-0.7-0.5-0.4-0.8c5-4.5,9.6-9.8,13.5-14.9c0,0,0-0.1,0.1-0.1c4.7-6.2,8.4-12,10.5-15.4
							c0.1-0.1,0.1-0.2,0.2-0.3c1.1-1.8,1.7-2.9,1.7-2.9c-3.7,0.5-7.1,0.7-10,0.7c-3.3,0-5.9-0.2-7.5-0.4c-0.8-0.1-1.1-0.9-0.5-1.4
							c4.5-4.2,8.5-8.9,11.9-13.5c4.6-6.3,8.1-12.2,10.1-15.8c0-0.1,1.9-3.6,1.9-3.6c-1.8,0.5-5.2,0.7-8.9,0.7c-5.4,0-11.5-0.4-14.5-0.6
							c-0.7,0-0.9-0.7-0.4-1.1c3.8-3.2,7.6-7.5,11.2-12.8c3.4-4.7,6.7-10.4,9.8-15.8c0-0.1,0.1-0.1,0.1-0.2c7.7-14,13.7-28,15.6-32.6
							c0.1-0.2,0.2-0.2,0.4-0.2c0.2,0,0.4,0.1,0.4,0.3c0.5,8.8-2.2,22.2-4.8,32.5c0,0,0,0.1,0,0.1C68.1,43.7,66,50.3,66,50.3
							c7.1,0,16.4-2,20-2.8c0.1,0,0.2,0,0.2,0C86.8,47.5,87.3,48,87.1,48.6z"></path>
					</g>
				</svg>
			</button>
		</nav>

		<nav id="music-menu" class="menu" onmouseover="stopTimeOut()">
		  <button class="trigger" onclick="toggleMenu()">
			<svg viewBox="0 0 16.8 21.4">
			<g>
				<rect x="0" y="5.9" fill="#A29060" width="4.6" height="15.5"></rect>
				<rect x="6.1" y="0" fill="#A29060" width="4.6" height="21.4"></rect>
				<rect x="12.3" y="10.7" fill="#A29060" width="4.6" height="10.7"></rect>
			</g>
			</svg>
		  </button>
		  <ul class="menu-controls">
			<li>
			  <button onclick="playToPause()">
				<svg id="play-icon" viewBox="0 0 8.9 10.3" class="hide">
					<polygon fill="#A29060" points="8.9,5.1 0,0 0,10.3 8.9,5.1 0,0 0,10.3"></polygon>
				</svg>
			  </button>
			  <button onclick="pauseToPlay()">
				<svg id="pause-icon" viewBox="0 0 7.3 9.5">
				  <path fill="#A29060" d="M2.8,9.5H0V0h2.8V9.5z M7.3,0H4.5v9.5h2.8V0z"></path>
				</svg>
			  </button>
			</li>
			<li>
			  <button onclick="shuffleSong()">
				<svg id="shuffle-icon" viewBox="0 0 16.8 11.5">
				<path fill="#A29060" d="M2.1,3H0V1.3h2.1c1.6,0,3.1,0.6,4.2,1.8c0,0.1-0.9,1.5-0.9,1.5C4.6,3.6,3.4,3,2.1,3z
					 M16.8,9.3l-3.6-2.3v1.5H12c-1.3,0-2.5-0.6-3.3-1.6c0,0-0.9,1.4-0.9,1.5c1.1,1.2,2.6,1.8,4.2,1.8h1.2l0,1.4L16.8,9.3z M16.8,2.2
					L13.2,0l0,1.4H12c-1.9,0-3.8,1-4.8,2.7L5.6,6.6c-0.7,1.2-2,1.9-3.4,1.9H0v1.6h2.1c1.9,0,3.8-1,4.8-2.7l1.6-2.6C9.3,3.7,10.6,3,12,3
					h1.2l0,1.5L16.8,2.2z"></path>
				</svg>
			  </button>
			</li>
			<li>
			  <button onclick="nextSong()">
				<svg id="next-icon" viewBox="0 0 14.4 9.7">
					<polygon fill="#A29060" points="6,9.7 6,6.2 0,9.7 0,0 6,3.5 6,0 14.4,4.8"></polygon>
				</svg>
			  </button>
			</li>
		  </ul>
		</nav>
		<div id="fullpage">
			<div class="section" id="home">
				<div class="paper-bg"></div>
				<div class="centered-content">
					<img src="/images/the-born-readies-logo.svg" alt="" />
				</div>
			</div>
			<div class="section" id="about" style="background-image: url('/images/the-born-readies-about.jpg')">
				<div class="centered-content">
					<img src="/images/the-born-readies-logo.svg" alt="" />
				</div>
			</div>
			<div class="section" id="merch" style="background-image: url('/images/the-born-readies-merch.jpg')">
				<div class="centered-content">
					<img src="/images/the-born-readies-logo.svg" alt="" />
				</div>
			</div>
			<div class="section" id="contact" style="background-image: url('/images/the-born-readies-contact.jpg')">
				<div class="centered-content">
					<img src="/images/the-born-readies-logo.svg" alt="" />
				</div>
			</div>
		</div>

		<!-- build:js2 scripts/vendor.min.js -->
		<script src="/vendor/jquery/dist/jquery.js"></script>
		<script src="/vendor/underscore/underscore.js"></script>
		<script src="/vendor/history.js/scripts/bundled/html4+html5/jquery.history.js"></script>
		<script src="/vendor/jquery-easing/jquery.easing.js"></script>
		<script src="/vendor/greensock/src/minified/TweenLite.min.js"></script>
		<script src="/vendor/greensock/src/minified/easing/EasePack.min.js"></script>
		<script src="/vendor/fullPage.js/jquery.fullPage.js"></script>

		<!-- endbuild -->

		<!-- build:js3 scripts/app.min.js -->
		<script src="/js/app.js"></script>
		<script src="/js/templates.js"></script>
		<!-- endbuild -->
		<script>
			"use strict";
			$(document).ready(function() {
				$('#fullpage').fullpage({
					onLeave: function(index, nextIndex, direction){
						if(index == 3 && direction == "down") {
							$(".bottom-border").animate({height:"3em"}, 800);
							$("#music-menu, .menu-controls").animate({bottom:"1.9em"}, 800);
						} else if(index == 4 && direction == "up"){
							$(".bottom-border").animate({height:"1.5em"}, 800);
							$("#music-menu, .menu-controls").animate({bottom:"0"}, 800);
						}
					}
				});
			});

			var navOpen = false;
			var toggleNav = function(){
				if (navOpen == false) {
					navOpen = true;
					$('.nav-container').animate({opacity:".95"}, 200, function() {});
					$('.nav-container').addClass('open');
				}else {
					navOpen = false;
					$('.nav-container').animate({opacity:"0"}, 200, function() {
						$('.nav-container').removeClass('open');
					});
				}
			}
			var pauseIcon = document.getElementById("pause-icon");
			var playIcon = document.getElementById('play-icon');
			var tbrSongs = ["You Really Turn Me On", "Wildside", "Get After It", "Fallen"];
			var songInt = 0;
			var nowPlaying = new Audio("songs/" + tbrSongs[songInt] + ".mp3");
		//    nowPlaying.volume = 0.1;
		//    figure out fade in audio
			nowPlaying.play();

		//  Player controls
			var pauseToPlay = function(){
			 pauseIcon.setAttribute("class", "hide");
			 playIcon.removeAttribute("class");
			 nowPlaying.pause();
			};
			var playToPause = function(){
			 playIcon.setAttribute("class", "hide");
			 pauseIcon.removeAttribute("class");
			 nowPlaying.play();
			};
			var nextSong = function(){
				if (songInt < tbrSongs.length - 1){
					songInt += 1;
					stopAndStartNewSong(songInt);
				}else{
					songInt = 0;
					stopAndStartNewSong(songInt);
				}
				playNextWhenSongEnds();
			};
			var randomSongInt = 0;
			var shuffleSong = function(){
				randomSongInt = Math.floor(Math.random() * (3 + 1));
				if (randomSongInt == songInt){
					randomSongInt = Math.floor(Math.random() * (3 + 1));
					shuffleSong();
				}else{
					songInt = randomSongInt;
					stopAndStartNewSong(songInt);
				}
				playNextWhenSongEnds();
			};

		//  functions for the player
			var stopAndStartNewSong = function(songInt){
				nowPlaying.pause();
				nowPlaying = new Audio("songs/" + tbrSongs[songInt] + ".mp3");
				nowPlaying.play();
			};

			var playNextWhenSongEnds = function(){
				nowPlaying.addEventListener("ended", nextSong);
			};
			playNextWhenSongEnds();

		//  Open and close player menu
			var menuOpen = false;
			var musicMenu = document.getElementById('music-menu');

			var myTimeOut;
			var looseFocusCloseMenu = function(){
				myTimeOut = setTimeout(function(){
					musicMenu.className = "menu";
					menuOpen = false;
				}, 800);
			};

			var stopTimeOut = function(){
				if(menuOpen == true){
					clearTimeout(myTimeOut);
				}
			};

			var toggleMenu = function(){
					if( menuOpen == false){
						menuOpen = true;
						musicMenu.className = "menu menu-open";
						musicMenu.addEventListener("mouseleave", looseFocusCloseMenu);
					} else {
						menuOpen = false;
						musicMenu.className = "menu";
					}
			}

		</script>
	</body>
</html>
